make a better way to check for loops
Update model eval to beam search